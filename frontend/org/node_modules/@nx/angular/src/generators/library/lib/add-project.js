"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addProject = void 0;
const devkit_1 = require("@nx/devkit");
function addProject(tree, libraryOptions) {
    const project = {
        name: libraryOptions.name,
        root: libraryOptions.projectRoot,
        sourceRoot: (0, devkit_1.joinPathFragments)(libraryOptions.projectRoot, 'src'),
        prefix: libraryOptions.prefix,
        tags: libraryOptions.parsedTags,
        projectType: 'library',
        targets: {
            build: libraryOptions.buildable || libraryOptions.publishable
                ? {
                    executor: libraryOptions.publishable
                        ? '@nx/angular:package'
                        : '@nx/angular:ng-packagr-lite',
                    outputs: ['{workspaceRoot}/dist/{projectRoot}'],
                    options: {
                        project: `${libraryOptions.projectRoot}/ng-package.json`,
                    },
                    configurations: {
                        production: {
                            tsConfig: `${libraryOptions.projectRoot}/tsconfig.lib.prod.json`,
                        },
                        development: {
                            tsConfig: `${libraryOptions.projectRoot}/tsconfig.lib.json`,
                        },
                    },
                    defaultConfiguration: 'production',
                }
                : undefined,
        },
    };
    (0, devkit_1.addProjectConfiguration)(tree, libraryOptions.name, project);
    return project;
}
exports.addProject = addProject;
