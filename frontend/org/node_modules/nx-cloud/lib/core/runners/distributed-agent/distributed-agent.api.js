const a5_0x473d=['__esModule','Completed\x20run\x20group\x20with\x20an\x20error','../../../utilities/axios','post','DistributedAgentApi','recordMetric','apiAxiosInstance','value','axiosMultipleTries','mapRespToPerfEntry','ciExecutionEnv:\x20','throw','ciExecutionId','ciExecutionId:\x20','error:\x20','ciExecutionEnv','data','response','defineProperty','completeRunGroup','note','createMetricRecorder','RUNNER_FAILURE_PERF_ENTRY','axiosException','then','branch','/nx-cloud/executions/tasks','error','createApiAxiosInstance','agentName','runGroup','next','Completing\x20with\x20an\x20error'];(function(_0x5c0c37,_0x473dee){const _0x66c76d=function(_0x534c03){while(--_0x534c03){_0x5c0c37['push'](_0x5c0c37['shift']());}};_0x66c76d(++_0x473dee);}(a5_0x473d,0x1e7));const a5_0x66c7=function(_0x5c0c37,_0x473dee){_0x5c0c37=_0x5c0c37-0x0;let _0x66c76d=a5_0x473d[_0x5c0c37];return _0x66c76d;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x4b3748,_0x3f1047,_0x12cb1a,_0x4a37d0){function _0x5e06db(_0x24d558){return _0x24d558 instanceof _0x12cb1a?_0x24d558:new _0x12cb1a(function(_0x5f4008){_0x5f4008(_0x24d558);});}return new(_0x12cb1a||(_0x12cb1a=Promise))(function(_0x3c52b3,_0x1db2e1){function _0x433aee(_0x112d41){try{_0x4fc880(_0x4a37d0[a5_0x66c7('0x6')](_0x112d41));}catch(_0x1dae8c){_0x1db2e1(_0x1dae8c);}}function _0x47b938(_0x6df6cd){try{_0x4fc880(_0x4a37d0[a5_0x66c7('0x13')](_0x6df6cd));}catch(_0x2d9065){_0x1db2e1(_0x2d9065);}}function _0x4fc880(_0x4ae125){_0x4ae125['done']?_0x3c52b3(_0x4ae125[a5_0x66c7('0xf')]):_0x5e06db(_0x4ae125['value'])[a5_0x66c7('0x20')](_0x433aee,_0x47b938);}_0x4fc880((_0x4a37d0=_0x4a37d0['apply'](_0x4b3748,_0x3f1047||[]))[a5_0x66c7('0x6')]());});};Object[a5_0x66c7('0x1a')](exports,a5_0x66c7('0x8'),{'value':!![]});exports['DistributedAgentApi']=void 0x0;const axios_1=require(a5_0x66c7('0xa'));const environment_1=require('../../../utilities/environment');const metric_logger_1=require('../../../utilities/metric-logger');const {output}=require('../../../utilities/nx-imports');class DistributedAgentApi{constructor(_0x16b1ef,_0x1fed7a,_0x1236ea,_0x557d51,_0x4da1c6,_0x3703c1){this['branch']=_0x1fed7a;this[a5_0x66c7('0x5')]=_0x1236ea;this[a5_0x66c7('0x14')]=_0x557d51;this[a5_0x66c7('0x17')]=_0x4da1c6;this[a5_0x66c7('0x4')]=_0x3703c1;this[a5_0x66c7('0xe')]=(0x0,axios_1[a5_0x66c7('0x3')])(_0x16b1ef);}['tasks'](_0x13733c,_0x560cab,_0x118ef3,_0x3f3148){var _0x55c9e5;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3b514d=(0x0,metric_logger_1[a5_0x66c7('0x1d')])('dtePollTasks');try{const _0x50a03d=yield(0x0,axios_1[a5_0x66c7('0x10')])(()=>this[a5_0x66c7('0xe')][a5_0x66c7('0xb')](a5_0x66c7('0x1'),{'runGroup':this[a5_0x66c7('0x5')],'ciExecutionId':this[a5_0x66c7('0x14')],'ciExecutionEnv':this['ciExecutionEnv'],'agentName':this[a5_0x66c7('0x4')],'executionId':_0x13733c,'statusCode':_0x560cab,'completedTasks':_0x118ef3,'targets':_0x3f3148}));_0x3b514d['recordMetric']((0x0,metric_logger_1['mapRespToPerfEntry'])(_0x50a03d));return _0x50a03d[a5_0x66c7('0x18')];}catch(_0x2fe5b1){_0x3b514d[a5_0x66c7('0xd')](((_0x55c9e5=_0x2fe5b1===null||_0x2fe5b1===void 0x0?void 0x0:_0x2fe5b1['axiosException'])===null||_0x55c9e5===void 0x0?void 0x0:_0x55c9e5[a5_0x66c7('0x19')])?(0x0,metric_logger_1[a5_0x66c7('0x11')])(_0x2fe5b1[a5_0x66c7('0x1f')][a5_0x66c7('0x19')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);throw _0x2fe5b1;}});}['completeRunGroupWithError'](_0x2fbea5){var _0x4df67a;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1['VERBOSE_LOGGING']){output[a5_0x66c7('0x1c')]({'title':a5_0x66c7('0x7'),'bodyLines':[a5_0x66c7('0x15')+this[a5_0x66c7('0x14')],a5_0x66c7('0x12')+this['ciExecutionEnv'],'runGroup:\x20'+this[a5_0x66c7('0x5')],a5_0x66c7('0x16')+_0x2fbea5]});}const _0x20528a=(0x0,metric_logger_1[a5_0x66c7('0x1d')])(a5_0x66c7('0x1b'));try{const _0x199183=yield(0x0,axios_1[a5_0x66c7('0x10')])(()=>this[a5_0x66c7('0xe')][a5_0x66c7('0xb')]('/nx-cloud/executions/complete-run-group',{'branch':this[a5_0x66c7('0x0')],'runGroup':this['runGroup'],'ciExecutionId':this['ciExecutionId'],'ciExecutionEnv':this[a5_0x66c7('0x17')],'agentName':this[a5_0x66c7('0x4')],'criticalErrorMessage':_0x2fbea5}));if(environment_1['VERBOSE_LOGGING']){output[a5_0x66c7('0x1c')]({'title':a5_0x66c7('0x9')});}_0x20528a['recordMetric']((0x0,metric_logger_1[a5_0x66c7('0x11')])(_0x199183));}catch(_0x12431a){_0x20528a[a5_0x66c7('0xd')](((_0x4df67a=_0x12431a===null||_0x12431a===void 0x0?void 0x0:_0x12431a[a5_0x66c7('0x1f')])===null||_0x4df67a===void 0x0?void 0x0:_0x4df67a[a5_0x66c7('0x19')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x12431a[a5_0x66c7('0x1f')][a5_0x66c7('0x19')]):metric_logger_1[a5_0x66c7('0x1e')]);console[a5_0x66c7('0x2')](_0x12431a);}});}}exports[a5_0x66c7('0xc')]=DistributedAgentApi;