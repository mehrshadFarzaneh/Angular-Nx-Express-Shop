"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.normalizeOptions = void 0;
const devkit_1 = require("@nx/devkit");
const semver_1 = require("@nx/devkit/src/utils/semver");
const path_1 = require("path");
const versions_1 = require("../../../utils/versions");
function normalizeOptions(tree, options) {
    var _a;
    let rxjsVersion;
    try {
        rxjsVersion = (0, semver_1.checkAndCleanWithSemver)('rxjs', (0, devkit_1.readJson)(tree, 'package.json').dependencies['rxjs']);
    }
    catch (_b) {
        rxjsVersion = (0, semver_1.checkAndCleanWithSemver)('rxjs', versions_1.rxjsVersion);
    }
    return Object.assign(Object.assign({}, options), { parentDirectory: options.parent ? (0, path_1.dirname)(options.parent) : undefined, route: options.route === '' ? `''` : (_a = options.route) !== null && _a !== void 0 ? _a : `''`, directory: (0, devkit_1.names)(options.directory).fileName, rxjsVersion });
}
exports.normalizeOptions = normalizeOptions;
