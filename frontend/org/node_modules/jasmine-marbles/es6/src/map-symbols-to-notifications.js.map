{"version":3,"file":"map-symbols-to-notifications.js","sourceRoot":"","sources":["../../../src/map-symbols-to-notifications.ts"],"names":[],"mappings":"AAIA,MAAM,UAAU,yBAAyB,CACvC,OAAe,EACf,WAAyB;IAEzB,MAAM,QAAQ,GAAG,WAAW,CAAC,KAAK,EAAE,CAAC;IACrC,MAAM,MAAM,GAAmD,EAAE,CAAC;IAElE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACvC,MAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QAE1B,QAAQ,MAAM,EAAE;YACd,KAAK,GAAG,CAAC;YACT,KAAK,GAAG,CAAC;YACT,KAAK,GAAG,CAAC;YACT,KAAK,GAAG,CAAC;YACT,KAAK,GAAG;gBACN,MAAM;YACR,KAAK,GAAG,CAAC;YACT,KAAK,GAAG,CAAC,CAAC;gBACR,QAAQ,CAAC,KAAK,EAAE,CAAC;gBACjB,MAAM;aACP;YACD,OAAO,CAAC,CAAC;gBACP,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;oBAClE,MAAM,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;oBAChC,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;oBAC9D,IAAI,KAAK,EAAE;wBACT,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;qBAC1B;oBACD,MAAM;iBACP;gBAED,MAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,EAAG,CAAC;gBAClC,MAAM,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;aACvC;SACF;KACF;IAED,OAAO,MAAM,CAAC;AAChB,CAAC","sourcesContent":["import { ObservableNotification } from 'rxjs';\n\nimport { TestMessages } from './types';\n\nexport function mapSymbolsToNotifications(\n  marbles: string,\n  messagesArg: TestMessages,\n): { [key: string]: ObservableNotification<any> } {\n  const messages = messagesArg.slice();\n  const result: { [key: string]: ObservableNotification<any> } = {};\n\n  for (let i = 0; i < marbles.length; i++) {\n    const symbol = marbles[i];\n\n    switch (symbol) {\n      case ' ':\n      case '-':\n      case '^':\n      case '(':\n      case ')':\n        break;\n      case '#':\n      case '|': {\n        messages.shift();\n        break;\n      }\n      default: {\n        if ((symbol.match(/^[0-9]$/) && i === 0) || marbles[i - 1] === ' ') {\n          const buffer = marbles.slice(i);\n          const match = buffer.match(/^([0-9]+(?:\\.[0-9]+)?)(ms|s|m) /);\n          if (match) {\n            i += match[0].length - 1;\n          }\n          break;\n        }\n\n        const message = messages.shift()!;\n        result[symbol] = message.notification;\n      }\n    }\n  }\n\n  return result;\n}\n"]}