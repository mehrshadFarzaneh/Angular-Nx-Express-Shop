"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.scamGenerator = void 0;
const tslib_1 = require("tslib");
const devkit_1 = require("@nx/devkit");
const component_1 = require("../component/component");
const export_scam_1 = require("../utils/export-scam");
const lib_1 = require("./lib");
function scamGenerator(tree, rawOptions) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        (0, lib_1.validateOptions)(tree, rawOptions);
        const { inlineScam } = rawOptions, generatorOptions = tslib_1.__rest(rawOptions, ["inlineScam"]);
        yield (0, component_1.componentGenerator)(tree, Object.assign(Object.assign({}, generatorOptions), { skipImport: true, export: false, standalone: false, skipFormat: true }));
        const options = (0, lib_1.normalizeOptions)(tree, rawOptions);
        (0, lib_1.convertComponentToScam)(tree, options);
        (0, export_scam_1.exportScam)(tree, options);
        if (!options.skipFormat) {
            yield (0, devkit_1.formatFiles)(tree);
        }
    });
}
exports.scamGenerator = scamGenerator;
exports.default = scamGenerator;
